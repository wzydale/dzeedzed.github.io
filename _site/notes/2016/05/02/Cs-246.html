<!DOCTYPE html>
<html>

  <style>
      p, ul {
        font-size: 1.25rem;
      }
  </style>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">



  <title>CS 246 - Object-Oriented Software Development</title>
  <meta name="description" content="CS 246 - Object-Oriented Software DevelopmentInstructor: Brad LushmanSection: 001Location: MC 4045Time: Tuesdays and Thursdays 10:00am - 11:20amTutorials: MC...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://dzed.me/notes/2016/05/02/Cs-246.html">
  <link rel="alternate" type="application/rss+xml" title="Dadi "D.Z." Zhang" href="http://dzed.me/feed.xml">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Karma:500' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>

</head>


  <body>

    <!--
    <link href="/css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="/css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="/css/homepage.css" type="text/css" rel="stylesheet"/>
  <link href="/css/genericons/genericons.css" type="text/css" rel="stylesheet"/>
 -->
<!-- <header class="site-header">

    <nav class="white site-header" role="navigation">
      <div class="nav-wrapper container">
        <a id="logo-container" href="" class="brand-logo">Dadi "DZ" Zhang</a>

        <ul class="right hide-on-med-and-down">
          
            
            <a class="page-link" href="/blog.html">Blog</a>
            
          
            
          
            
            <a class="page-link" href="/dreamlist.html">Dream List</a>
            
          
            
          
            
          
            
            <a class="page-link" href="/gotutorials.html">Go Tutorials</a>
            
          
            
          
            
          
            
          
            
          
            
            <a class="page-link" href="/notes.html">Notes</a>
            
          
            
            <a class="page-link" href="/projects.html">Projects</a>
            
          
        </ul>
      </div>
    </nav>

</header> -->

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Karma:500' rel='stylesheet' type='text/css'>

<style>

/* Fade */
.hvr-fade {
  display: inline-block;
  vertical-align: middle;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  box-shadow: 0 0 1px rgba(0, 0, 0, 0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  -moz-osx-font-smoothing: grayscale;
  overflow: hidden;
  -webkit-transition-duration: 0.3s;
  transition-duration: 0.3s;
  -webkit-transition-property: color, background-color;
  transition-property: color, background-color;
}
.hvr-fade:hover, .hvr-fade:focus, .hvr-fade:active {
  background-color: black;
  color: white;
}

.page-link {
    padding-top: 17px;
    padding-bottom: 17px;
    padding-right: 14px;
    padding-left: 14px;
    margin-left: -24.5px;
    margin-right: -24.5px;
}


.site-title:hover {
    text-decoration: none;
}

.page-link:hover {
    text-decoration: none;
}

.site-title {
  font-family: "Raleway", serif;
  font-size: 2rem;
}

.trigger a {
  font-family: "Raleway", serif;
}

</style>

<header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Dadi "D.Z." Zhang</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">


      <div class="trigger">
        
          
          <a class="page-link hvr-fade" href="/blog.html">Blog</a>
          
        
          
        
          
          <a class="page-link hvr-fade" href="/dreamlist.html">Dream List</a>
          
        
          
        
          
        
          
          <a class="page-link hvr-fade" href="/gotutorials.html">Go Tutorials</a>
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link hvr-fade" href="/notes.html">Notes</a>
          
        
          
          <a class="page-link hvr-fade" href="/projects.html">Projects</a>
          
        
          <a class="page-link hvr-fade" href="/resume/resume.pdf">R&eacutesum&eacute</a>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">CS 246 - Object-Oriented Software Development</h1>
    <p class="post-meta">
    

    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <div class="highlighter-rouge"><pre class="highlight"><code>CS 246 - Object-Oriented Software Development
Instructor: Brad Lushman
Section: 001
Location: MC 4045
Time: Tuesdays and Thursdays 10:00am - 11:20am
Tutorials: MC 4060 Wednesdays 1:30pm - 2:20pm
Term: Spring 2016
</code></pre>
</div>

<h2 id="may-3-2016---lecture-1">May 3, 2016 - Lecture 1</h2>

<p><strong>Grading Scheme</strong></p>

<ul>
  <li>Assignments - 0(A0) 7 7 7 7 12(project) = 40%</li>
  <li>Midterm (4:30pm - 6:20pm, June 23 (Th), 2016) = 20%</li>
  <li>Final = 40%</li>
</ul>

<p>This course requires you to work in Linux. There are several options:</p>

<ol>
  <li>Lab machines</li>
  <li>Install Linux on your own machines</li>
  <li>Make SSH connection to school machines (Use Putty (putty.exe) on Windows, winscp for file transfer, XMing for Xwindows)</li>
  <li>Download cygwin - Linux-like environment for Windows</li>
  <li>Get a Mac</li>
</ol>

<p><strong>4 Modules in this Course:</strong></p>

<ul>
  <li>Linux Shell (2 weeks)</li>
  <li>C++ Language, C++14 (10 weeks)</li>
  <li>Tools</li>
  <li>Software Engineering (design etc.)</li>
</ul>

<p>“Homework”: Go on Piazza -&gt; Linux Reference Sheet -&gt; Save and print</p>

<h2 id="module-1-linux-shell">Module 1: Linux Shell</h2>

<p>A shell is an interface to the operating system, i.e. how we get the OS to do things (run programs, manage files etc.). There are two kinds of shells: graphical (with icons and clicking) and the command line. The shell we will use is Bash. Check if you are using Bash, login to shell and type in:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ echo $0
</code></pre>
</div>

<p>It should return “bash”.</p>

<p><strong>Linux file system: working with files</strong></p>

<p><strong>cat</strong> - short for concatenate; display contents of a file (e.g. cat user/share/dict/words). In Linux, a directory is considered a special kind of file</p>

<p><strong>ls</strong> - list files in the current directory (non-hidden files)</p>

<p><strong>ls -a</strong> - list all files (including hidden; hidden files start with a “.”)</p>

<p><strong>pwd</strong> - print current directory (pwd = print working directory)</p>

<p>What happens when we only type in “cat”? It just kind of sits there, waiting for input. It’s kinda like a parrot, repeating what you typed in. If we can capture the output into a file…</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ cat &gt; output.txt
</code></pre>
</div>

<p>It would capture the input. NOT RECOMMENDED: ^C. It would prevent cat from doing clean-up. Let it finish on its own: ^D at the beginning of a line sends an “EOF” signal to cat.</p>

<p>One greater than sign replaces, two appends.<br />
In general, command args &gt; file
executes command args + captures the output in file -&gt; called <strong>output redirection</strong>.</p>

<p>Using less than sign, takes in input from the file.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ cat &lt; output.txt
</code></pre>
</div>

<p>The line above displays the file. Seems to be equivalent to what we have before. Are these two things the same? NO. The reason is very important:</p>

<ul>
  <li>
    <p>cat input.txt -&gt; passes the NAME input.txt to cat as an argument. Cat opens input.txt and displays its contents</p>
  </li>
  <li>
    <p>cat &lt; input.txt -&gt; the shell opens the file and passes the contents to cat IN PLACE of keyboard input</p>
  </li>
</ul>

<p><strong>wc</strong> - word count, displays numbers of lines, words, and characters of a file</p>

<p><strong>cat *.txt</strong> - *.txt globbing pattern -&gt; matches any sequence of characters (the shell finds all files that mathch the pattern)</p>

<p><strong>cat &lt; *.txt</strong> - ERROR! The shell will only attach one file to cat’s input stream</p>

<p>Many (but not all) commands take both kinds of inputs:</p>

<p><strong>cat &lt; input.txt &gt; output.txt</strong> - sends chars from input.txt to output.txt; effectively a copy-paste action</p>

<p>Every process is attached to 3 streams. Stdin goes into the program, stdout and stderr come out of the program. Stdin -&gt; program -&gt; stdout and stderr. By default, stdin = keyboard, stdout, stderr = screen.
&lt; connects stdin to file, &gt; connects stdout to file, 2&gt; stdrr. Stderr separates output stream from error messages, so that output error messages can go to different places, and that error messages don’t cut/block output files.</p>

<p>Also, stdout may be <strong>buffered</strong>. System may assemble characters before displaying. However, stderr isn’t buffered, because user needs to see error messages immediately.</p>

<p><strong>Pipes</strong>: Make one program’s output(stdout) another program’s input(stdin). Example: How many words occur in the first 20 lines of sample.txt?</p>

<div class="highlighter-rouge"><pre class="highlight"><code>head -n file
</code></pre>
</div>

<p>gives the first n lines of file</p>

<div class="highlighter-rouge"><pre class="highlight"><code>wc -w
</code></pre>
</div>

<p>counts words (just print the word count)</p>

<p>so</p>

<div class="highlighter-rouge"><pre class="highlight"><code>head -20 sample.txt | wc -w
</code></pre>
</div>

<table>
  <tbody>
    <tr>
      <td>Here,</td>
      <td>(the pipe symbol) makes the output of the command before it the input of the command after it.</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<h2 id="may-4-2016---tutorial-1">May 4, 2016 - Tutorial 1</h2>

<p>To zip your assignment files, do:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>zip (directory where your files are).zip *
</code></pre>
</div>

<p>in the directory where the files are.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>marmoset_submit cs246 (question, e.g a0) (file you want to submit, zipped)
</code></pre>
</div>

<p>is how you submit assignments to Marmoset.</p>

<p><br /></p>

<h2 id="may-5-2016---lecture-2">May 5, 2016 - Lecture 2</h2>

<p>Suppose we have files words1.txt, words2.txt…, and each of them has one word per line. We want: A duplicate-free list of all the words used in any of these files</p>

<p>We need the following:</p>

<ul>
  <li>sort - sorts lines (man: Write sorted concatenation of all FILES(s) to standard output)</li>
  <li>uniq - remove consecutive duplicate lines from input (man: filter adjacent matching lines from INPUT, writing to OUTPUT)</li>
</ul>

<p>One possibility:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cat words*.txt | uniq
</code></pre>
</div>

<p>What’s the problem with this? We must sort our input first, because for aabaacd, it would produce abacd, with duplicates.</p>

<p>This should work:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cat words*.txt | sort | uniq
</code></pre>
</div>

<p>Sort it first, then call uniq. But there’s still a problem: it’s way too inefficient, beacuse it cat(s) all the files together FIRST, and then sorts it.</p>

<p>This is better:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sort words*.txt | uniq
</code></pre>
</div>

<p>Q: Is it possible to use the output onf one program as a <strong>parameter</strong> to another?</p>

<p>Yes. E.g.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>echo "Today is $(date) and I am $(whoami)"
</code></pre>
</div>

<p>The shell executes date and whoami, and subsitutes the results into the command line.</p>

<p>WARNING:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>echo 'Today is $(date) and I am $(whoami)'
</code></pre>
</div>

<p>This will print the <strong>LITERAL</strong> interpretation, i.e. Today is $(date) and I am $(whoami)<br />
Single quotes do not execute the substitution.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>echo "$(ls words*.txt)"
</code></pre>
</div>

<p>prints a list of names of the text files:<br />
words1.txt<br />
words2.txt<br />
…</p>

<p><strong>Pattern Matching in Text Files</strong><br />
Use egrep (extended global regular expression print) = grep -E</p>

<div class="highlighter-rouge"><pre class="highlight"><code>egrep pattern file
</code></pre>
</div>

<p>returns all lines that contain the pattern.</p>

<p>E.g. print lines that contain “cs246”</p>

<div class="highlighter-rouge"><pre class="highlight"><code>egrep cs246 index.html
</code></pre>
</div>

<p>What about “cs246” OR “CS246”?</p>

<div class="highlighter-rouge"><pre class="highlight"><code>egrep "cs246|CS246" index.html
</code></pre>
</div>

<p>The vertical bar (|) means “OR”, and the double quotes prevent the shell from interpreting the bar as a pipe.</p>

<p>We can use parentheses to group subexpressions together:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>egrep "(cs|CS)246" index.html
</code></pre>
</div>

<p>The patterns that egrep understands are called <strong>regular expressions</strong>. NOT globbing patterns.</p>

<p>“(c|C)(s|S)246” is equivalent to “[cC][sS]246”</p>

<p><strong>[…]</strong> syntax says to match any SINGLE character in he square brackets. (a|1|c|2) is equivalent to [a1c2].</p>

<p><strong>[^…]</strong> matches any 1 character not in the square brackets.</p>

<p>“[cC][sS] ?246” allows for an optional space before the 246. ? syntax says to match 0 or 1 occurrences of the preceding expression.</p>

<p>* syntax which matches 0 or more of the preceding expression. So (cs)*246 -&gt; 246, cs246, cscs246, cscscs246…<br />
cs(cs)*246 matches at least one cs at the front (eliminating the zero case)</p>

<p>(cs)+246 is equivalent to cs(cs)*246. The + syntax matches 1 or more of the preceding expression.</p>

<p>.* will match any sequence of characters</p>

<p>.+ will match any non-empty sequence of characters</p>

<p>“cs *246” matches any string starting with cs, followed by any string, followed by 246.</p>

<p>^ matches beginning of line</p>

<p>$ matches the end of line</p>

<p>^cs246 line starts with cs246</p>

<p>cs246$ line ends with cs246</p>

<p>Want all lines of even length</p>

<p>^(..)*$</p>

<h1 id="the-other-section">The Other Section</h1>

<p>Pipes allow us to hook the stdin of one program to the stdout of another. This is done using the pipe character | between commands</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cmd1 args1 | cmd2 args2
</code></pre>
</div>

<p><strong>Regex Rules</strong>:</p>

<ul>
  <li>Can use parentheses for a sub-pattern</li>
  <li>Can use square brackets to match any one character in the square brackets</li>
  <li>[^…] matches any one character EXCEPT those in the square brackets</li>
  <li>A ? after a pattern or character represents 0 or 1 of that pattern/character</li>
  <li>A * after a pattern/character represents 0 or more of that pattern/character</li>
  <li>A + “1 or more”</li>
  <li>. matches any SINGLE character</li>
  <li>^ and $ match the start and end of line respectively</li>
</ul>

<p>E.g.<br />
.* - anything<br />
.+ - non-empty string<br />
^.+$ - all non-empty lines<br />
^.*$ - all lines</p>

<p>^(..)*$ - grabs all lines with even number of characters</p>

<p><strong>Permissions</strong></p>

<ul>
  <li>ls -l gives the long form listing of the files in the current directory</li>
  <li>First 3 bits: Owner r-read w-write x-execute</li>
  <li>Middle 3 bits: Group</li>
  <li>Last 3 bits: Others</li>
  <li>r: ordinary files-&gt; can be read, directories-&gt; contents can be read, globbing workds, ls works</li>
  <li>w: ordinary files-&gt;can be modified, directories-&gt; contents can be modified, add/remove</li>
  <li>x: file’s contents can be executed as a program, directories-&gt;directories can be navigated (can cd into the directory)</li>
</ul>

<p><strong>Changing Permissions</strong></p>

<ul>
  <li>
    <p>to change permissions use chmod</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>  chmod mode file
</code></pre>
    </div>
  </li>
  <li>mode is broken up to 3 parts - user, operator, and permissions</li>
  <li>user is either u (owner), g (group), o (other), or a (all)</li>
  <li>operator is either + (add), - (remove), = (set exactly)</li>
  <li>permissions are r, w, x</li>
</ul>

<p>E.g.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>chmod o+r filename
</code></pre>
</div>

<p>gives other group read access to the file</p>

<div class="highlighter-rouge"><pre class="highlight"><code>chmod o-r filename
</code></pre>
</div>

<p>is the reverse</p>

<div class="highlighter-rouge"><pre class="highlight"><code>chmod a-r filename
</code></pre>
</div>

<p>then nobody can read it</p>

<div class="highlighter-rouge"><pre class="highlight"><code>chmod u=rwx filename
</code></pre>
</div>

<p>then the owner can do anything with it.</p>

<p><strong>Shell Scripts</strong></p>

<p>A shell script is a file containing sequences of shell commands execueted as a program. For example if we wanted to print the date, current user, current dir.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash (this header tells the OS that this is a Bash script; allows the OS to interpret it the following as bash commands)</span>
date
whoami
<span class="nb">pwd</span>
</code></pre>
</div>

<p>.sh is the standard extension of a bash script, but you can put whatever you want. Don’t forget permissions. Needs to be executable. Use chmod to give it executation rights.</p>

<p><strong>Variables</strong></p>

<ul>
  <li>Variables can be assigned with single equals.</li>
  <li>x=1 (NO SPACES!!!)</li>
  <li>use echo &amp;{x} to grab the value of the variable x (parentheses run what’s inside it in a “subshell”) (curly braces are important: good practice)</li>
</ul>

<p><strong>Shell Script Example</strong></p>

<p>Write a script that takes in a string to check if it is BAD. A string that can be found in a dict is bad.
General format of conditional statements in bash:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>if [ cond ]; then // the square brackets cannot "touch" what's inside
...
elif [ cond ]; then
...
else
...
fi
</code></pre>
</div>

<p><strong>$?</strong> contains the return value of the last-run command.
<strong>$1</strong> retrieves the first parameter</p>

<p>Create a .sh script as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

egrep <span class="s2">"^</span><span class="nv">$1</span><span class="s2">$"</span> /usr/share/dict/words &gt; /dev/null  <span class="c"># /dev/null is where data goes to DIE</span>

<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq 0 <span class="o">]</span>; <span class="k">then</span> //-eq compares
<span class="nb">echo </span>Bad password
<span class="k">else
</span><span class="nb">echo </span>Maybe not the worst
<span class="k">fi</span>
</code></pre>
</div>

<p>And before you run it,</p>

<div class="highlighter-rouge"><pre class="highlight"><code>chmod u+x goodpass.sh
</code></pre>
</div>

<p>In bash, the pound symbol (#) starts a comment.</p>

<p><br /></p>

<h2 id="may-10-2016---lecture-3">May 10, 2016 - Lecture 3</h2>

<p>Review:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>egrep pattern file
</code></pre>
</div>

<p>prints all lines in file that contain a match to pattern</p>

<p><strong>Shell Scripts Review</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash  #"Shebang line"  </span>
date  
whoami  
<span class="nb">pwd</span>
</code></pre>
</div>

<p>To run the script in the current directory:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>./myscript
</code></pre>
</div>

<p><strong>Variables</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>x=1 #NO SPACES  
echo $x #Use $ when fetching the value of a variable
# No $ when setting a var ($ = "fetch the value of")
# Good practice: ${x} - brace brackets, good style
# All vars contain strings, e.g. x is the STRING 1, not the number/int
</code></pre>
</div>

<p>E.g.<br />
    dir = ~/cs246
    echo ${dir}
    /u/bmlushma/cs246 # get the absolute path
    ls ${dir} # contents of cs246</p>

<p>There are some global variables:<br />
    env # environment variables
    echo ${PATH} # list of directories (where the shell looks for programs)</p>

<p>When you type a command, the shell searches the list in order for a matching program.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>echo * # prints all files in the current directory
echo "*" - suppresses globbing pattern
echo '*' - suppresses globbing pattern
echo "$PATH" # expands the quotes, $-expansion happens
echo '$PATH' # absolutely literally
</code></pre>
</div>

<p><strong>Special Variables for Scripts</strong><br />
    $1, $2, … # command-line arguments</p>

<p>E.g. check whether a word is in the dictionary</p>

<div class="highlighter-rouge"><pre class="highlight"><code>./isItAWord hello

#!/bin/bash

egrep "^$1$" /usr/share/dict/words # prints the word if found, prints nothing if not
</code></pre>
</div>

<p>E.g. a good password is not in the dictionary</p>

<div class="highlighter-rouge"><pre class="highlight"><code>egrep "^$1$"/usr/share/dict/words &gt; /dev/null # to black hole, suppress output
# we could store the out in a variable
x=$egrep ...
</code></pre>
</div>

<p>Note: every program returns a status code when finished: egrep returns 0 if found, 1 if not found (general convention in UNIX: 0 means success, non-0 means failure)</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$? # status of the most recently executed command

if [ $? -eq 0]; then # the first square bracket is the name of a program, and what's inside the square brackets are its arguments
    echo Bad password
else
    echo Maybe a good password
fi
</code></pre>
</div>

<p>We want to verify that the user has inputted the correct number of arguments, and print a usage message if it’s wrong</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

usage<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">"usage: </span><span class="nv">$0</span><span class="s2"> password"</span> <span class="c"># $0 is the name of the script/program as it was typed</span>
<span class="o">}</span>

<span class="k">if</span> <span class="o">[</span> <span class="nv">$# </span>-ne 1 <span class="o">]</span>; <span class="k">then</span> <span class="c"># $# is the number of arguments</span>
    usage
    <span class="nb">exit </span>1
<span class="k">fi

</span>egrep ... <span class="c"># as established above</span>
</code></pre>
</div>

<p>Now this is a good program that can also check if the input is valid.</p>

<p>The general structure of conditional statements is as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>if [ cond ]; then
    ...
elif [ cond ]; then
    ...
else
    ...
fi
</code></pre>
</div>

<p>Comparisons to other conditions: Check the Linux reference sheet</p>

<p><strong>Loops</strong></p>

<p>Loops: print the numbers from 1 to $1</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nv">x</span><span class="o">=</span>1
<span class="k">while</span> <span class="o">[</span> <span class="nv">$x</span> -le <span class="nv">$1</span> <span class="o">]</span>, <span class="k">do
    </span><span class="nb">echo</span> <span class="nv">$x</span>
    <span class="nv">x</span><span class="o">=</span><span class="k">$((</span>x+1<span class="k">))</span> <span class="c"># $(()) for arithmetic</span>
<span class="k">done</span>
</code></pre>
</div>

<p>Looping over a list, e.g. rename all .cpp to .cc</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="k">for </span>name <span class="k">in</span> <span class="se">\*</span>.cpp; <span class="k">do</span> <span class="c"># for ... in sets the variable to each word in the given list</span>
    mv <span class="k">${</span><span class="nv">name</span><span class="k">}</span> <span class="k">${</span><span class="nv">name</span><span class="p">%cpp</span><span class="k">}</span>cc <span class="c"># value of name, without trailing cpp</span>
<span class="k">done</span>
</code></pre>
</div>

<p>e.g. how many times does word $1 occur in the file $2?</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nv">x</span><span class="o">=</span>0
<span class="k">for </span>word <span class="k">in</span> <span class="k">$(</span>cat <span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span><span class="k">)</span>; <span class="k">do</span> <span class="c">#good idea - enclose vars in double quotes, prevent bad input</span>
    <span class="k">if</span> <span class="o">[</span> <span class="nv">$word</span> <span class="o">==</span> <span class="nv">$1</span> <span class="o">]</span>; <span class="k">then</span> <span class="c">#String equality == instead of -eq</span>
        <span class="nv">x</span><span class="o">=</span><span class="k">$((</span>x+1<span class="k">))</span>
    <span class="k">fi
done
</span><span class="nb">echo</span> <span class="nv">$x</span>
</code></pre>
</div>

<p>e.g. Payday is the last Friday of the month. When is this month’s payday?</p>

<p>2 tasks here: compute date and fomat the answer</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cal | awk '{print $6}' | egrep "[0-9]" | tail -1
</code></pre>
</div>

<p><br /></p>

<h2 id="may-11-2016---tutorial-2">May 11, 2016 - Tutorial 2</h2>

<p>Want: stdout and stderr in the same file</p>

<p>printer » out 2&gt; out # works
  printer &gt; out 2» out #doesn’t work</p>

<p>#Alternatives
  printer &amp;&gt; out
  printer &gt; out 2&gt;&amp;1
  printer 2&gt;out 1&gt;&amp;2</p>

<p>Want: Give the top 10 most commonly used words</p>

<table>
  <tbody>
    <tr>
      <td>sort wordCollection</td>
      <td>uniq -c</td>
      <td>head # problem</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>sort wordCollection</td>
      <td>uniq -c</td>
      <td>sort</td>
      <td>tail # works</td>
      <td> </td>
    </tr>
    <tr>
      <td>sort wordCollection</td>
      <td>uniq -c</td>
      <td>sort -k1,1rn -k2,2</td>
      <td>head # sort takes in arguments -k as key; 1,1 = first character r = reverse order(descending) n = sort in numerical order, 2 break ties</td>
      <td> </td>
    </tr>
    <tr>
      <td>sort wordCollection</td>
      <td>uniq -c</td>
      <td>sed ‘s_6<em>12</em>’</td>
      <td>sort</td>
      <td>tail # Use sed to replace 6s with 12s and then sort lexigraphically</td>
    </tr>
    <tr>
      <td>sort wordCollection</td>
      <td>uniq -c</td>
      <td>sed ‘s_6<em>12</em>’</td>
      <td>sort -k1,1nr -k2,2</td>
      <td>head</td>
    </tr>
  </tbody>
</table>

<p>egrep:</p>

<p>^ - match beginning of line<br />
$ - match end of a line<br />
^$, ^a$<br />
. - matches any single character<br />
? - matches preceeding pattern 0 or 1 times<br />
* - 0 or more<br />
+ - 1 or more</p>

<p>Note: abc* != (abc)*
ab, abccc, abcccccc, in comparison to abc, abcabc, abcabcabc</p>

<p><br /></p>

<h2 id="may-12-2016---lecture-4">May 12, 2016 - Lecture 4</h2>
<p>Recall: compute payday (last Friday of the month); report nicely</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

answer<span class="o">()</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">[</span> <span class="nv">$1</span> -eq 31 <span class="o">]</span>; <span class="k">then</span> <span class="c"># inside a fn - $1, $2 etc are the args to the function</span>
    <span class="nb">echo</span> <span class="s2">"This month: the 31st"</span>
  <span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"This month: the </span><span class="k">${</span><span class="nv">1</span><span class="k">}</span><span class="s2">th"</span>
  <span class="k">fi</span>
<span class="o">}</span>

answer <span class="k">$(</span>cal | awk <span class="s1">'{print $6}'</span> | egrep <span class="s2">"[0-9]"</span> | tail -1<span class="k">)</span> <span class="c"># the whole thing after the dollar sign is ${1}</span>
</code></pre>
</div>

<p>Generalize to any month:</p>

<p>cal June 2016 # gives calendar for June 2016<br />
Want: let payday June 2016 gives June 2016’s payday</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

answer<span class="o">()</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">[</span> <span class="nv">$2</span> <span class="o">]</span>; <span class="k">then
    </span><span class="nv">preamble</span><span class="o">=</span><span class="k">${</span><span class="nv">2</span><span class="k">}</span>
  <span class="k">else
    </span><span class="nv">preamble</span><span class="o">=</span><span class="s1">'This month'</span>
  <span class="k">fi

  if</span> <span class="o">[</span> <span class="nv">$1</span> -eq 31 <span class="o">]</span>; <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">preamble</span><span class="k">}</span><span class="s2">'s payday is on the 31st."</span>
  <span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">preamble</span><span class="k">}</span><span class="s2">'s payday is on the </span><span class="k">${</span><span class="nv">1</span><span class="k">}</span><span class="s2">th."</span>
  <span class="k">fi</span>
<span class="o">}</span>

answer <span class="k">$(</span>cal <span class="nv">$1</span> <span class="nv">$2</span> | awk <span class="s1">'{print $6}'</span> | egrep <span class="s2">"[0-9]"</span> | tail -1<span class="k">)</span> <span class="nv">$1</span> <span class="c"># if $1 and $2 are supplied, revert back to previous behaviour</span>
</code></pre>
</div>

<h2 id="software-engineering-testingsaka-qa-lmao">Software Engineering: Testings(aka QA lmao)</h2>

<ul>
  <li>essential part of program development</li>
  <li>ongoing, not just at the end
    <ul>
      <li>begins <strong>BEFORE</strong> coding</li>
      <li>test suites - expected behaviour</li>
    </ul>
  </li>
  <li>NOT debugging - cannot debug without first testing</li>
  <li>cannot guarantee correctness, can only prove wrongness</li>
  <li>ideally, developer + tester should be different people</li>
</ul>

<p><strong>Human Testing</strong> - Humans look over code, find flaws, code inspection, walkthroughs<br />
<strong>Machine Testing</strong> - Run the program on selected input, check against spec, can’t test everything - choose test cases carefully</p>

<p><strong>Black/White/Grey Box Testing</strong>: no/full/some knowledge of program implementation<br />
Start with black box, supplement with white box</p>

<ul>
  <li>various classes of input, e.g. numerical ranges, positive/negative</li>
  <li>Boundaries of valid ranges (edge cases)</li>
  <li>Multiple simulatenous boundaries (corner cases)</li>
  <li>Intuition/Experience (“Ayy I’ve seen programs like that before, better try blah lmao”)</li>
  <li>Extreme cases (e.g. integer overflow; how large can the integer get before it breaks)</li>
</ul>

<p>White box - executes all logical paths through the program</p>

<ul>
  <li>run through the true part and false branch of conditional statements</li>
  <li>every way you can go from start to finish should be tested</li>
  <li>make sure every function you write actually gets called</li>
</ul>

<p><strong>Performance Testing</strong> - Is the program fast enough?<br />
<strong>Regression Testing</strong></p>

<ul>
  <li>Make sure new changes to the program don’t break old tests</li>
  <li>test suites (ALWAYS ADD TESTS; NEVER SUBTRACT), testing scripts</li>
</ul>

<h2 id="module-2-c-ayy">Module 2: C++ (ayy)</h2>

<p>Hello World in C:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#include &lt;stdio.h&gt;

int main() {
  printf("Hello World!\n");
  return 0;
}
</code></pre>
</div>

<p>Hello World in C++:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#include &lt;iostream&gt;
using namespace std;

int main() {
  cout &lt;&lt; "Hello World" &lt;&lt; ende;
  return 0;
}
</code></pre>
</div>

<p>Notes:</p>

<ul>
  <li>main MUST return int in C++</li>
  <li>stdio.h, printf still available in C++</li>
  <li>preferred C++ I/O: header <iostream></iostream></li>
</ul>

<p>Output:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>std::cout &lt;&lt; ___ &lt;&lt; ____ &lt;&lt; ____  
std::ende = end-of-line
</code></pre>
</div>

<p>Using namespace std lets you say cout and ende instead of std::cout and std::ende</p>

<p>Return statement - returns status code to the shell ($?). If left out, main returns 0</p>

<p><strong>Compiling C++ Programs</strong></p>

<p>On the school Linux environment:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    g++-5 -std=c++14 program.cc -o program
    (-o program is the name of the executable binary (if not specified: a.out))
    // OR
    g++14 program.cc -o program // if you have done A0 and made the alias
    // Run the program by
    ./program
</code></pre>
</div>

<p><strong>Input/Output</strong><br />
  3 IO streams: cout - for printing to stdout, cin - for reading from stdin, cerr - for writing to stderr</p>

<p>Operators: « “put to” - Output, » “get from” - input</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  cerr &lt;&lt; x // x flows to cerr
  cin &gt;&gt; x // input flows to x
  // The operator points in the direction of information flow
</code></pre>
</div>

<p>E.g. Add 2 numbers</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#include &lt;iostream&gt;
using namespace std;

int main() {
  int x, y;
  cin &gt;&gt; x &gt;&gt; y; // cin ignores whitespace; gets two integers, ignoring whitespace
  cout &lt;&lt; x+y ;
}
</code></pre>
</div>

<p>If the input doesn’t contain an integer next - statement fails, value of the var is undefined</p>

<p>What if the input is exhaustive, before we get two ints? - Same as above</p>

<p>If the read failed: cin.fail() will be TRUE<br />
If we got an EOF: cin.fail() and cin.eof() will be both TRUE; cin.eof() not until the attempted read fails</p>

<p>E.g. Read all ints from stdin, echo one per line to stdout. Stop on bad input or EOF</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int main() {
  int i;
  while(true) {
    cin &gt;&gt; i;
    if (cin.fail()) break;
    cout &lt;&lt; i &lt;&lt; ende;
  }
}
</code></pre>
</div>

<p><br /></p>

<h2 id="may-17-2016---lecture-5">May 17, 2016 - Lecture 5</h2>

<p>E.g. Read all ints from stdin + echo, one per line, to stdout, stop on bad input of EOF</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int main() {
	int i;
	while (true) {
		cin &gt;&gt; i;
		if (cin.fail()) {
			break;
		}
		cout &lt;&lt; i &lt;&lt; endl;
	}
}
</code></pre>
</div>

<p>Recall: if read fails, cin.fail() will be true; if EOF: cin.fail() and cin.eof() both true, but not until the attepted read fails</p>

<p>Note: there is an implicit conversion from cin to bool, so cin can be used as a condition. The conversion is that it’s true if fail/bad/eof bits are clear, or false if fail/bad/eof set</p>

<p>E.g. v2.0</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int main() {
	int i;
	while (true) {
		cin &gt;&gt; i;
		if (!cin) { // using cin as the condition, means the same thing as the other program
			break;
		}
		cout &lt;&lt; i &lt;&lt; true
 		}
}
</code></pre>
</div>

<p>Note: » is C’s right bitshift operator; a » b shifts a’s bits to the right by b spots</p>

<p>E.g. 21 » 3; 21 in binary is 10101, push the last 3 digits off the cliff, so it becomes 10 in binary, which is 2; equivalent to dividing by 2 to the b-th power, ignoring remainders</p>

<p>But when the left hand side is cin, this is the “get from” operator</p>

<div class="highlighter-rouge"><pre class="highlight"><code>operator &gt;&gt;
 	// inputs: LHS cin (istream), RHS data (variety of types); output: return cin (istream)
 	// This is why we can write: cin &gt;&gt; x &gt;&gt; y &gt;&gt; z; cin &gt;&gt; x produces cin, x gets populated, and now we get cin &gt;&gt; y &gt;&gt; z, and so on.
</code></pre>
</div>

<p>E.g. v3.0</p>

 	int main() {
 		int i;
 		while (true) {
 			if (!(cin » i)) { // using it as both a condition and populating i
 				break;
 			}
 			cout « i « endl;
  		}
 	}

<p>E.g. v4.0</p>

 	int main() {
 		int i;
 		while(cin » i) { // changing the break statement into a single while loop
 			cout « i « endl
 		}
 	}

<p>E.g. read and echo ints until EOF, skip non-integer input</p>

 	int main() {
 		int i;
 		while (true) {
 			if (!(cin » i)) {
 				if (cin.eof()) {
 					break;
 				}
 				cin.clear(); // clears the fail bit, so that cin is ready to read again
 				cin.ignore(); // throws away the next character
 			} else {
 				cout « i « endl;
 			}
 		}
 	}

<p>Reading strings: type std::string (#include <string>)</string></p>

 	int main() {
 		string s;
 		cin » s;
 		cout « s « endl;
 	}

 	// skips leading white space;
 	// stops at whitespace (reads one word)

<p>What if we want the hvitespace? Use getline(cin, s), it reads from the current position to next newline, into s.</p>

 	cout « 95 « endl; // prints 95

<p>What if we want to print a number in hexadecimal?</p>

 	cout « hex « 95 « endl; // this will print 95 in hex, 5f
 	// hex is std::hex, is the I/O manipulator, reconfigures the output string, all subsequent ints are printed in hex (FOR THE REST OF ETERNITY, nah jkjk till the program terminates); A bit of an overkill?
 	cout « dec; // goes back to decimal

 	// Other manipulator, SEE NOTES, don’t forget
 	#include <iomanip>
</iomanip>
<p>Stream abstraction applies to other fsources of data</p>

<p><strong>Files</strong> - Read from a file instead of stdin<br />
 	std::ifstream reads from a file<br />
 	std::ofstream writes to a file</p>

<p>File access in C:</p>

 	#include <stdio.h>
</stdio.h>
 	int main() {
 		char s[256];
 		FILE *file = fopen(“suite.txt”, “r”); // r = read mode; file is a handle
 		while (true) {
 			fscanf(file, “%255s”, s);
 			if (feof(file)) break;
 			printf(“%s\n”, s);
 		}
 		fclose(file);
 	}

<p>File access in C++:</p>

 	#include <iostream>
 	#include <fstream>
 	using namespace std;
</fstream></iostream>
 	int main() {
 		ifstream file{“suite.txt”}; // creating and initializing an ifstream opens the file
 		string s;
 		while (file » s) {
 			cout « s « endl;
 		}
 		// IMPORTANT: the file is closed when the variable (in this case, file), goes out of scope; when the program stops, it’s popped of the runtime stack, it then closes.
 	}

<p>Anything you can do do with cin and cout, you can do with an ifstream or an ofstream. ANYTHING.</p>

<p>E.g. string - attach a stream to a string and read/write it</p>

<div class="highlighter-rouge"><pre class="highlight"><code> #include &lt;sstream&gt; // std::istringstream and std::ostringstream read from/write to a string

 int hi = ..., lo = ...;
 ostringstream ss; // think of it as a sock
 ss &lt;&lt; "Enter a # between" &lt;&lt; lo &lt;&lt; "and" &lt;&lt; hi; // stuffing the sock with string
 string s = ss.str(); // cuts open the sock and gets the string
 cout &lt;&lt; s &lt;&lt; endl;
</code></pre>
</div>

<p>E.g. convert a string to a #</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int n;
while (true) {
	cout &lt;&lt; "Enter a number" &lt;&lt; endl;
	string s;
	cin &gt;&gt; s;
	istringstream ss {s};
	if (ss &gt;&gt; n) break; // stop if you get int
	cout &lt;&lt; "I said,";
}
cout &lt;&lt; "You entered" &lt;&lt; n &lt;&lt; endl;
</code></pre>
</div>

<p>Example revisited - echo numbers, skip non-numbers</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int main() {
	string s;
	while (cin &gt;&gt; s) {
		istringstream ss {s};
		int n;
		if (ss &gt;&gt; n) {
			cout &lt;&lt; n &lt;&lt; endl;
		}
	}
}
</code></pre>
</div>

<p>Strings:</p>

<p>In C, array of char (char* or char[]), terminated by IO. Must manage own memory: get morememory when strings grow; Easy to overwrite IO and corrupt program</p>

<p>In C++, strings grow as needed, and thus safer</p>

<p>E.g. string s{“Hello”}; // it’s still an array (C-style string); C++ string created from C string on initialization</p>

<p>String Operations: Equality Inequality, s1 == s2, s1 != s2<br />
Comparison: s1 &lt;= s2 (lexicographical comparison)<br />
Length: s.length()<br />
Extract individual characters: s[0], s[1] etc.<br />
Concatenation: s3 = s1 + s2, s3 += s4<br />
More details: SEE NOTES</p>

<p>Default Function Parameters</p>

<div class="highlighter-rouge"><pre class="highlight"><code>void printSuiteFile(String name = "suite.txt") { // default value
	...
}

printSuiteFile("suite2.txt");
printSuiteFile(); // prints from suite.txt
</code></pre>
</div>

<p>Note: optional params must be last; if you leave out two parameters, they have to be the last two; 3,3 etc.</p>

<p><br /></p>

<h2 id="may-18-2016---tutorial-2">May 18, 2016 - Tutorial 2</h2>

<p>##Shell Scripting##</p>

<ul>
  <li>Exit codes are important; non-zero return/exit value = ERROR</li>
  <li>Write to the correct stream</li>
  <li>Scoping for subroutines, anything defined befored a subroutine is visible(and modifiable) in the subroutine, except positional arguments ($1, $2, …)</li>
</ul>

<p>##Testing##</p>

<ul>
  <li>Don’t have to worry about invalid inputs</li>
  <li>Testing is hard</li>
  <li>Try sanity checks (“No one could make this mistake”)</li>
  <li>Good coverage: boundary/edge and corner cases, equivalence classes, weird cases</li>
</ul>

<p><strong>Possible Test Cases</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>+ Equivalence courses: small, medium, and large values of the target
+ Boundary/edge cases: test containing 0 as target
</code></pre>
</div>

<p>##C++ I/O##</p>

<ul>
  <li>DO NOT USE C I/O</li>
  <li>3 default streams: cout, cerr, cin</li>
  <li>If a read from cin fails, <strong>all subsequent reads will fail</strong></li>
</ul>

<p>##Make I/O More Robust##</p>

<ul>
  <li>Reading from cin could fail in two ways
    <ul>
      <li>EOF</li>
      <li>got unexpected input</li>
    </ul>
  </li>
  <li>When a read fails, a flag goes up in cin
    <ul>
      <li>cin.fail() will be true</li>
      <li>Only cin.fail() will be true if it was an error</li>
      <li>Both cin.fail() and cin.eof() will be true if it was EOF</li>
      <li>How to clear: cin.clear() -&gt; put all cin flags down and turn it into a valid state</li>
      <li>How to continue: cin.ignore(); order is important: clear then ignore</li>
    </ul>
  </li>
  <li>If you want the entire line, use getline(cin, s)</li>
</ul>

<p>##Strings##</p>

<ul>
  <li>Encapsulates something like char* in C</li>
  <li>Has length, insert, delete, search methods</li>
  <li>Can be accessed like an array</li>
  <li>include<string></string></li>
  <li>at(index): checks for bounds and throws an exception if out of bounds</li>
  <li></li>
</ul>

<p><br /></p>

<h2 id="may-19-2016---lecture-6">May 19, 2016 - Lecture 6</h2>

<p><strong>Overloading</strong></p>

<p>C:</p>

<p>int negInt(int n) { return -n; }
  int negBool(bool b) { return !b; }</p>

<p>C++: Functions with different parameter lists can share the same name</p>

<p>int neg(int n) { return -n; }
  int neg(bool b) { return !b; }
  // example of overloading</p>

<p>Compiler uses number of types of arguments to decide which neg is being called.</p>

<p>Overloads must differ in number of type of arguments, not just on the return type. We’ve seen this before: », « (operators, could be right shift/left shift, or could be input and output; the behaviour depends on types of args)</p>

<p><strong>Structs</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>struct Node {
  int data;
  Node \*next;
}; // don't forget the semicolon

Node n1{5, nullptr}; // nullptr is the syntax for a null pointer in C++.
// Do not say NULL or 0 in this class!!!!!!! 0 will be always treated as a number, not pointer

const Node n2 = n1; // constant struct means that its fields cannot be changed; n2 is an immutable copy of n1
</code></pre>
</div>

<p><strong>Parameter Passing</strong></p>

<p>Recall:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>void inc(int n) {
  n = n + 1;
  // ...
  int x = 5;
  inc(x);
  cout &lt;&lt; x &lt;&lt; endl; // prints 5; call-by-value
  // inc gets a copy of x and modifies the copy, not the original
}
</code></pre>
</div>

<p>Sol’n: If a function needs to modify its arugument - pass a pointer</p>

<div class="highlighter-rouge"><pre class="highlight"><code>void inc(int n) {
  \*n = \*n + 1;
  // ...
  int x = 5;
  inc(&amp;x); // x's address passed by value, inc changes value at that address, visible to caller
  cout &lt;&lt; x &lt;&lt; endl; // prints 6
}
</code></pre>
</div>

<p>Question: Why cin » x and not cin » &amp;x?<br />
Answer: C++ has another pointer-like type: references</p>

<p><strong>References (IMPORTANT!!!)</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>int y = 10;
int &amp;z = y; // NEW. Ampersand after int. z is an **lvalue reference** to int ( which is y)
            // Like a constant pointer, similar to int \*const z = &amp;y;
            // (z is a constant pointer to an int; z will always point to y implied by const)
            // (but y is not constant; you can change y however you like)
</code></pre>
</div>

<p>References are like constant pointers with automatic dereferencing.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>z = 12; // NOT \*z = 12
int \*p = &amp;z; // &amp;z gives the address of y. No matter what you do to z, you do it y. In all cases, z behaves exactly like y. z is an alias for y.
</code></pre>
</div>

<p><strong>Things you CANNOT do with lvalue references</strong></p>

<ul>
  <li>leave them uninitialized, because they are constant, cannot assign later
    <ul>
      <li>must be initialized with something that actually has an address (an lvalue) since references are pointers</li>
      <li>E.g.
  int &amp;x = 3; // WRONG: WONT COMPILE, because 3 is not an address
  int &amp;x = y + z; // WRONG
  int &amp;x = y; // GOOD</li>
    </ul>
  </li>
  <li>create pointer to a reference: int &amp;* x; // WRONG
    <ul>
      <li>reference to a pointer is legal: int *&amp; x;</li>
    </ul>
  </li>
  <li>create a reference to a reference: int &amp;&amp; x = …; // means something different (will discuss later)</li>
  <li>create an array of references: int &amp;a[] = {x, x, x}; // given the similarity between arrays and pointers</li>
</ul>

<p><strong>Things you CAN do with lvalue references</strong></p>

<ul>
  <li>
    <p>Pass as function parameters:</p>

    <p>void inc(int &amp;n) { // const pointer to the argument (x), thus changes to n affect x
    n = n + 1; // no pointer dereferencing
  }
  int x = 5;
  inc(x);
  cout « x « endl; // prints 6</p>
  </li>
</ul>

<p>Why does cin » x work? It takes x by reference</p>

<p>istream &amp;operator » (istream &amp;in, int &amp;n);</p>

<p><strong>Pass-by-value</strong></p>

<p>E.g.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int f(int n) {...} // copies the argument
// if the argument is big, copying is expensive

struct ReallyBig{}; // Massive struct with thousands of fields
int f(ReallyBig rb) {...} // copying would be slow

int g(ReallyBig &amp;rb) {...} // pass as reference, no copy, it's an alias, fast
// this could change rb in the caller, in contrast to pass by value, which guarantees
// no changes to rb itself after calling

int h(const ReallyBig &amp;rb) {...} // pass constant reference, no copy, fast, and the parameter cannot be changed
</code></pre>
</div>

<p>Advice: prefer pass-by-const-reference over pass-by-value for anything larger than an int, unless the function needs to make a copy anyway - then maybe pass by value. DEFAULT SHOULD BE PASS-BY-CONST-REF. Sizeof reference is same as size of a pointer</p>

<p>Also:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int f(int &amp;n) {...}
int g(const int &amp;n) {...}

f(5); // LMAO FAILS WON'T COMPILE, because 5 does not have an address; can't initialize an lvalue reference (n) to a literal value;
// if n changes, can't change the literal 5
g(5); // OK; since n can never be changed, the compiler will allow this
// How though? The compiler creates a temporary location to hold 5, so that n has something to point at
</code></pre>
</div>

<p>That’s why const ref is so CRITICALLY IMPORTANT.</p>

<p><strong>Dynamic Memory Allocation</strong></p>

<p>C:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int \*p = malloc(n * sizeof(int));
free(p);
// Don't use these though
</code></pre>
</div>

<p>C++: new/delete</p>

<p>E.g.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>struct Node {
  int data;
  Node \*next;
}

Node \*np = new Node; // allocates a Node on the heap and np points to it
// ...
delete np;
// all local variables reside on the stack
// deallocated (popped) when their scope ends
// Allocated memory is on the heap, it stays there until you get rid of it
// Remains allocated until delete is called
</code></pre>
</div>

<p>If you don’t delete - MEMORY LEAK</p>

<p><strong>Arrays on the heap</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>Node \*myArray = new Node[10];
// ...
delete [] myArray; // The square brackets have to be there
</code></pre>
</div>

<p>E.g.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Node getMeANode() { // copy to caller's frame, expensive
    Node n;
    return n;
}

Node &amp;getMeANode() { // WORST. Returns a ref (essentially a pointer) to stack-allocated data, which is dead on return
    Node n;
    return n;
}

Node \*getMeANode() { // fast-ish and safe, not returning pointer to dead data, caller responsible for delete when done
    Node \*np = new Node;
    return np;
}
</code></pre>
</div>

<p>Considering all options, do No.1.</p>

<p><strong>Operator Overloading</strong></p>

<p>Give our own meanings to C++ operators for types we create</p>

<div class="highlighter-rouge"><pre class="highlight"><code>struct Vec {
    int x, y;
}

Vec operator+(const Vec &amp;v1, const Vec &amp;v2) {
  Vec v{v1.x+v2.x, v1.y+v2.y}
  return v;
}
</code></pre>
</div>

<p><br /></p>

<h2 id="may-24-2016---lecture-7">May 24, 2016 - Lecture 7</h2>

<p>##Preprocessor Variables##</p>

<ul>
  <li>We can also define preprocessor symbols via the compiler; with gcc, syntax is -Dvname or -Dvname=val (-DX)</li>
  <li><strong>ifdef</strong> and <strong>ifndef</strong> directives: these check if a preprocessor variable has been defined (a use for simply defining variables); can be used to debug; #ifdef DEBUG to conditionally print stuff out to debug code; can offload run time to compile time
    <ul>
      <li>syntax: <code class="highlighter-rouge">
  g++14 -DDEBUG program.cpp // set DEBUG
 </code>
##Separate Compilation##</li>
    </ul>
  </li>
  <li>To help readability and create modularity we can split our programs into composable modules. Each module consist of <strong>interface</strong> (type definitions and prototypes for functions, .h file, contains declarations, won’t allocate space for the variables) and <strong>implementation</strong> (full details, allocates space for variables/functions, .cpp file, contains definitions)</li>
  <li>Example: Let’s take the vector struct and overloaded addition operator we created and put in a module so that it can be used by other files; create vec.h and vec.cpp</li>
</ul>

<p>```C++
  // vec.h
  struct Vec {
    int x, y;
  };</p>

<p>Vec operator+(const Vec &amp;v1
                const Vec &amp;v2); // constant reference to vectors, do not modify the originals</p>

<p>// vec.cpp
  #include “vec.h” // to get the struct definition from the interface file</p>

<p>Vec operator+(const Vec &amp;v1, const Vec &amp;v2) {
    return {v1.x + v2.x, v1.y + v2.y};
  }</p>

<p>// main.cpp
  #include “vec.h”
  using namespace std;</p>

<p>int main() {
    Vec x {1,2};
    Vec y {3,4};
    Vec v = x + y;
    cout « v.x « ”, “ « v.y « endl;
    return 0;
  }</p>

<p>```</p>

<p>when compiling:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  g++14 -c vec.cpp // -c oppresses linking, creates .o (object) file
  g++14 -c main.cpp
  g++14 vec.o main.o -o main
  ./main
</code></pre>
</div>

<p>##Global Variables##</p>

<ul>
  <li>Consider we want to want to define a global variable in a module
<code class="highlighter-rouge">C++
  // abc.h
  int globalNum; // Wrong - definition and declaration
  // This won't work, every file that includeds abc.h defines a SEPARATE globalNum and the program will not link
</code></li>
  <li>Solution: put the variable in the .cpp file
<code class="highlighter-rouge">C++
  // abc.h
  extern int globalNum; // Correct, just declaration
  // abc.cpp
  int globalNum;
</code></li>
</ul>

<p>##Multiple Includes##</p>

<ul>
  <li>Always put #include guards in .h files (ifdef, define, endif)</li>
  <li>Never put using namespace std in .h files; DO NOT USE ANY NAMESPACES WHATSOEVER!</li>
</ul>

<p>##Classes##</p>

<ul>
  <li>The big innovation of OOP - we can put functions inside of structs</li>
  <li>A class is some struct that can contain functions</li>
  <li>An object is an instance of a class</li>
  <li>Member functions (aka Methods) are functions inside a class</li>
  <li>this = pointer to the object a member function is called on; syntax: this-&gt;var; s.grade() is like calling grade(&amp;s)</li>
</ul>

<p><br /></p>

<h2 id="may-26-2016---lecture-8">May 26, 2016 - Lecture 8</h2>

<h2 id="classes-continued">Classes Continued</h2>
<p>Recall: student.cpp, implemented as struct<br />
This class:</p>

<h2 id="initializing-objects">Initializing Objects</h2>
<ul>
  <li>When creating an object typicaly the class will have data members that need to be assigned values - initialized</li>
  <li>As shown in the student example we could use curly braces to initialize our class, and in C++ this is true for most types - this is called <strong>Uniform Initialization</strong></li>
  <li>Ex. Student bob {60, 70, 80} in the student.cpp example</li>
</ul>

<h2 id="constructors">Constructors</h2>
<ul>
  <li>Without defining how your class should be constructed C++ just takes those values and assigns them to each field in the order they were declared - this is okay, but has limitations</li>
  <li>A better idea is to include in your class a method that does the initialization - called a <strong>constructor</strong></li>
  <li>
    <p>Ex. in the student.cpp example</p>

    <p>Student(int assns, int mt, int final) {
    // Debug statement here
    this-&gt;assns = assns;
    this-&gt;mt = mt;
    this-&gt;final = final;
  }
  // default value given
  Student(int assns=0, int mt=0, int final=0) {
      // …
  }</p>
  </li>
</ul>

<h2 id="notes-on-initialization">Notes on Initialization</h2>
<ul>
  <li>
    <p>Sometimes variables are initialized with the assignment operator</p>

    <p>int x = 5;
  string s = “hello”;</p>
  </li>
  <li>
    <p>And sometimes with (), especially when invoking Constructors</p>

    <p>int x(5);
string s(“Hello”)
Student bob(60, 70, 80)</p>
  </li>
  <li>
    <p>An exception to this: std::vector</p>

    <p>std::vector B{1,3,5} // contains elements 1,3,5
std::vector V(5) // of size 5
std::vector G{1} // actually contains element 1; curly brackets -&gt; element rather than size</p>
  </li>
  <li>
    <p>Also,</p>

    <p>int x = 2.0; // the decimal will get chopped off
int x {2.0} // COMPILER ERROR</p>
  </li>
  <li>
    <p>A class is a struct itself, an object is an actual variable of that type</p>
  </li>
</ul>

<h2 id="default-constructor">Default Constructor</h2>

<ul>
  <li>Every class comes with a default (zero-argument) constructor which calls: you can create an object but set its values later</li>
  <li>As soon as you declare your own constructor, you lose the default</li>
</ul>

<h3 id="section">#</h3>

<ul>
  <li>What about if our class contains a constant field or a reference field?</li>
  <li>For example let’s consider adding an ID field to our student class, this should be a const value that never changes but is different for each initialized student object</li>
  <li>Where to initialize them though? Struct definition (i.e. create an ID field in the struct; const int id = 0;)? In the body of the constructor?</li>
  <li>Problem: const int should be initialized</li>
  <li>Solution:</li>
</ul>

<h2 id="object-creation-steps">Object Creation Steps</h2>
<ul>
  <li>Space is allocated</li>
  <li>Fields are constructed</li>
  <li>Constructor body runs</li>
  <li>The moddile step is the missing piece of the puzzle where our initialization must go!</li>
</ul>

<h2 id="mil">MIL</h2>
<ul>
  <li>The member initialization list is part of our constructor that specifies how to initialize object and non-static data members of our class</li>
  <li>Can be used for any non-static memebers</li>
  <li>Initialized in order of declaration in struct</li>
  <li>Is more efficient, when the constructor is doing the same thing as the MIL, when there is a class inside a class (school class in student class)</li>
  <li>
    <p>Ex.</p>

    <p>Student(): assns{assns}, mt{mt}, final{final}, id{id} {</p>

    <p>}</p>
  </li>
</ul>

<h2 id="copy-constructor">Copy Constructor</h2>
<ul>
  <li>What happens when you use the assignment opeartor to instantiate an object?</li>
  <li>
    <p>Ex.</p>

    <p>Student a {60,70,80}
  Student b = a;</p>
  </li>
  <li>b will be initialized via the copy constructor</li>
  <li>All classes have an implicit copy constructor that just copies all regular data fields and calls copy constructors on all object fields</li>
  <li>Ex.
  #include “Node.h”
  Node::Node(const Node &amp;in) : data(in.data) {
    if (in.next) {
      next = new Node(*in.next);
    } else {
      next = nullptr;
    }
  }
  // recursively copies the nodes</li>
</ul>

<h2 id="implicit-methods">Implicit Methods</h2>
<ul>
  <li>Every class comes with
    <ul>
      <li>A default constructor</li>
      <li>A copy constructor (just copies all fields)</li>
      <li>A copy assignment operator</li>
      <li>A destructor</li>
      <li>A move constructor</li>
      <li>A move assignmenet operator</li>
    </ul>
  </li>
</ul>

<h2 id="notes-on-copy-constructor">Notes on Copy Constructor</h2>
<ul>
  <li>The copy constructor (implicit or otherwise) is called when
    <ul>
      <li>An object is initialized by another object</li>
      <li>When an object is passed by value</li>
      <li>When an object is returned by a function</li>
    </ul>
  </li>
</ul>

<h2 id="implicit-conversion">Implicit conversion</h2>
<ul>
  <li>Be careful with a constructor that takes only one parameter - this will create an implicit conversion</li>
</ul>

<h2 id="destructor">Destructor</h2>
<ul>
  <li>Necessary if your class has any memory allocated on the heap</li>
</ul>

  </div>

</article>

<div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//dzklavier.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
      </div>
    </div>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-77018906-1', 'auto');
  ga('send', 'pageview');

</script> 


    <footer class="site-footer">

  <style>
    .footer-col-3 p, .contact-list {
      font-size: 1rem;
    } 
  </style>

  <div class="wrapper">


    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list social-media-list">
          <li>Dadi "D.Z." Zhang</li>
          <li><a href="mailto:d236zhan@uwaterloo.ca">d236zhan@uwaterloo.ca</a></li>
          
          <li>
            <a href="https://github.com/dzeedzed"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">dzeedzed</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        
      </div>

      <div class="footer-col footer-col-3">
        <p>Dadi "D.Z." Zhang | Coder. Developer. Language enthusiast. Go fanatic. Jays fan. Worships 442.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
